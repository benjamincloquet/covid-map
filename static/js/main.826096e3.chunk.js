(this["webpackJsonpcovid-map"]=this["webpackJsonpcovid-map"]||[]).push([[0],{44:function(e,t,c){},79:function(e,t){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},87:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),o=c.n(r),a=c(15),s=c.n(a),i=(c(44),function(){return Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{children:"covid-map"}),Object(n.jsx)("h3",{children:"Click on a country to see its up to date stats related to the COVID-19 pandemic."}),Object(n.jsx)("h2",{children:Object(n.jsx)("a",{href:"https://github.com/benjamincloquet/covid-map",children:"A project by Benjamin Cloquet"})})]})}),u=c(2),l=c(90),d=c(91),j=c(93),p=c(92),h=Object(r.createContext)(),b=Object(r.createContext)(),O=function(e,t){switch(t.type){case"select":return{selectedCountry:t.payload};case"deselect":return{selectedCountry:null};default:throw new Error("Unhandled action type: ".concat(t.type))}},f=function(e){var t=e.children,c=Object(r.useReducer)(O,{selectedCountry:null}),o=Object(u.a)(c,2),a=o[0],s=o[1];return Object(n.jsx)(h.Provider,{value:a,children:Object(n.jsx)(b.Provider,{value:s,children:t})})},m=function(){var e=Object(r.useContext)(h);if(void 0===e)throw new Error("useCountrySelectionState must be used within a CountrySelectionProvider");return e},x=function(){var e=Object(r.useContext)(b);if(void 0===e)throw new Error("useCountrySelectionDispatch must be used within a CountrySelectionProvider");return e},y=function(){return{state:m(),dispatch:x()}},v=c(6),g=c.n(v),C=c(38),N=c.n(C),w=c.p+"static/media/ne_110m_admin_0_countries.7fe02f72.zip",S=function(e){var t=e.map,c=y().dispatch,n=function(e,t){t.on("click",(function(){c({type:"select",payload:{name:e.properties.NAME,displayName:e.properties.ADMIN}})}))},o={color:"#4acc22",weight:1,opacity:1,fillOpacity:0};return Object(r.useEffect)((function(){if(t){var e={onEachFeature:n,style:o},c=g.a.geoJSON({features:[]},e);c.addTo(t),N()(w).then((function(e){c.addData(e)}))}}),[t]),null},E=(c(83),function(){var e=y(),t=e.state,c=e.dispatch,o=t.selectedCountry,a=function(e){var t=Object(r.useState)(null),c=Object(u.a)(t,2),n=c[0],o=c[1],a=Object(r.useState)(!1),s=Object(u.a)(a,2),i=s[0],l=s[1];return Object(r.useEffect)((function(){l(!1),e?fetch("https://covid19-api.com/country?name=".concat(e,"&format=json")).then((function(e){return e.json()})).then((function(e){void 0===e[0]?l(!0):(l(!1),o(e[0]))})):o(null)}),[e]),{countryInfo:n,error:i}}(o?o.name:null),s=a.countryInfo,i=a.error;return Object(n.jsxs)("div",{className:"popup ".concat(null===t.selectedCountry?"popup-hidden":null),children:[null===t.selectedCountry?null:s||i?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"popup-country-card",children:[Object(n.jsx)("h1",{className:"popup-country-name",children:o.displayName}),s?Object(n.jsx)("img",{className:"popup-country-flag",width:"40",height:"30",src:"https://flagcdn.com/120x90/".concat(s.code.toLowerCase(),".png"),alt:s.name}):null]}),i?Object(n.jsx)("h2",{children:"No data for this country."}):Object(n.jsxs)("div",{className:"popup-figure-container",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"popup-figure-name",children:"Confirmed cases"}),Object(n.jsx)("h2",{className:"popup-figure-name",children:"Recovered"}),Object(n.jsx)("h2",{className:"popup-figure-name",children:"Deaths"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{className:"popup-figure",children:s.confirmed.toLocaleString()}),Object(n.jsx)("h2",{className:"popup-figure",children:s.recovered.toLocaleString()}),Object(n.jsx)("h2",{className:"popup-figure",children:s.deaths.toLocaleString()})]})]})]}):Object(n.jsx)("p",{children:"Loading..."}),Object(n.jsx)("button",{type:"button",className:"popup-close-button",onClick:function(){c({type:"deselect"})},"aria-label":"close"})]})}),k=(c(84),l.a.BaseLayer),L=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),c=t[0],o=t[1];return Object(n.jsx)(f,{children:Object(n.jsxs)(d.a,{className:"map-container",whenCreated:o,bounds:[[-10,-10],[50,10]],children:[Object(n.jsxs)(l.a,{position:"topright",children:[Object(n.jsx)(k,{checked:!0,name:"OpenStreetMap.Mapnik",children:Object(n.jsx)(j.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",noWrap:!0})}),Object(n.jsx)(p.a,{children:Object(n.jsx)(S,{map:c})})]}),Object(n.jsx)(E,{})]})})};c(85);var D=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(i,{}),Object(n.jsx)(L,{})]})};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.826096e3.chunk.js.map